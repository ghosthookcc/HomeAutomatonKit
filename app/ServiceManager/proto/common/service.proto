syntax = "proto3";
package ServicePackage;

option go_package = "github.com/ghosthookcc/HomeAutomatonKit/app/ServiceManager/proto-stubs/impl/go/common";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

service Service 
{
    rpc Ping (google.protobuf.Empty) returns (State);
    rpc Connect (BaseReply) returns (State);
    rpc Disconnect (BaseReply) returns (State);
    rpc PropagateCachedLogs (BaseReply) returns (google.protobuf.Empty);
    rpc GetCurrentStatus (BaseReply) returns (google.protobuf.Empty);
    rpc GetState (BaseReply) returns (State);
}

enum CurrentState 
{
    ALIVE = 0;
    DEAD = 1;
    CONNECTING = 2;
    DISCONNECTING = 3;
    RECONNECTING = 4;
    ERROR = 5;
}

message State 
{
    BaseReply descriptor = 1;
    CurrentState state = 2;
}

message BaseReply 
{
    int32 id = 1;
    google.protobuf.Timestamp lastUpdated = 2;
}